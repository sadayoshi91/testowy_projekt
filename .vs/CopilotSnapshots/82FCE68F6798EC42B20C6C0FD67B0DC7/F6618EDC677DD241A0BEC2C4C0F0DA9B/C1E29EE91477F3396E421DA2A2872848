import React from 'react';
import { Office } from '../../models/office';
import { Employee } from '../../models/employee';

export function OfficePanel({ offices, employees, onRent, onAssignDesk, onUpgradeDesk, darkMode }: {
 offices: Office[],
 employees: Employee[],
 onRent: (officeId: string) => void,
 onAssignDesk: (officeId: string, deskId: string, employeeId: string) => void,
 onUpgradeDesk: (officeId: string, deskId: string, upgradeId: string) => void,
 darkMode?: boolean
}) {
 const panelStyle = {
 border: '1px solid',
 borderColor: darkMode ? '#444' : '#ccc',
 borderRadius:6,
 padding:10,
 background: darkMode ? '#232323' : '#fff',
 color: darkMode ? '#fff' : '#222',
 marginBottom:12
 };
 return (
 <div style={panelStyle}>
 <h3 style={{ color: darkMode ? '#fff' : '#222' }}>Office Management</h3>
 {offices.length ===0 && <div style={{ color: darkMode ? '#aaa' : '#777' }}>No offices available</div>}
 {offices.map(office => (
 <div key={office.id} style={{ borderBottom: '1px solid', borderColor: darkMode ? '#333' : '#eee', marginBottom:8, paddingBottom:8 }}>
 <div><strong>{office.name}</strong> <small>{office.owned ? '(Owned)' : '(For rent)'}</small></div>
 <div>Rent: {office.rent}</div>
 {!office.owned && <button onClick={() => onRent(office.id)}>Rent this office</button>}
 {office.owned && (
 <div style={{ marginTop:8 }}>
 <strong>Desks:</strong>
 <ul>
 {office.desks.map(desk => (
 <li key={desk.id}>
 {desk.name} — Assigned: {desk.assignedEmployeeId ? (employees.find(e => e.id === desk.assignedEmployeeId)?.name || 'Unknown') : 'None'}
 <select
 value={desk.assignedEmployeeId || ''}
 onChange={e => onAssignDesk(office.id, desk.id, e.target.value)}
 style={{ marginLeft:8 }}
 >
 <option value="">-- assign employee --</option>
 {employees.map(emp => (
 <option key={emp.id} value={emp.id}>{emp.name}</option>
 ))}
 </select>
 <button style={{ marginLeft:8 }} onClick={() => onUpgradeDesk(office.id, desk.id, 'upgrade1')}>Upgrade desk</button>
 </li>
 ))}
 </ul>
 </div>
 )}
 </div>
 ))}
 </div>
 );
}
